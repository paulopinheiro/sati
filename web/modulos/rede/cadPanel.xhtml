<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <f:view>
        <f:metadata>
            <f:viewParam id="rackCod" name="rackCod" value="#{panelMB.rack}" converter="#{rackConverterMB}" required="true" />
        </f:metadata>
        <body>
            <ui:composition template="./../../resources/templates/menuSuperior.xhtml">
                <ui:define name="titulo">Cadastro de Painéis do Rack #{panelMB.rack}, Município de #{geralMB.municipioSessao}</ui:define>
                <ui:define name="top">Cadastro de Painéis do Rack #{panelMB.rack}, Município de #{geralMB.municipioSessao}</ui:define>
                <!--
                <ui:define name="left">
                    <h:form id="formMenu">
                        <h:panelGrid styleClass="menu" id="menuCaPanel" columns="1">
                            <h:commandLink id="linkVoltar" value="Voltar" action="/modulos/rede/cadRack" />
                        </h:panelGrid>
                    </h:form>
                </ui:define>
                -->
                <ui:define name="content">
                    <h:form id="formPanel">
                        <h:panelGrid id="gridTitulo" columns="1">
                            <f:facet name="header"><b>Dados do Painel</b></f:facet>
                        </h:panelGrid>
                        <h:panelGrid rendered="#{empty panelMB.panel.codigo}" columns="3">
                            <h:outputLabel for="quantPortas" value="Painel de " />
                            <h:inputText size="4" maxlength="3" id="quantPortas" value="#{panelMB.panel.quantPortas}" dir="RTL" onkeyup="this.value = this.value.replace (/\D+/, '')" onkeydown="this.value = this.value.replace (/\D+/, '')" />
                            <h:outputText value="portas" />
                        </h:panelGrid>
                        <h:panelGrid rendered="#{! empty panelMB.panel.codigo}" columns="3">
                            <h:outputText value="Painel de " />
                            <h:outputText value="#{panelMB.panel.quantPortas}" />
                            <h:outputText value="portas" />
                        </h:panelGrid>
                        <h:panelGrid id="gridFormPanel" columns="2">
                            <h:outputLabel for="nome" value="Nome: " />
                            <h:inputText size="20" id="nome" value="#{panelMB.panel.nome}" onkeydown="limitText(this,15)" onkeyup="limitText(this,15)" />
                            <h:outputLabel for="descricao" value="Descrição: " />
                            <h:inputTextarea cols="50" rows="5" id="descricao" value="#{panelMB.panel.descricao}" onkeydown="limitText(this,255)" onkeyup="limitText(this,255)" />
                            <h:outputLabel for="rack" value="Rack: " />
                            <h:outputText id="rack" value="#{panelMB.rack}" />
                            <h:outputLabel for="observacao" value="Observação: " />
                            <h:inputTextarea cols="50" rows="5" id="observacao" value="#{panelMB.panel.observacao}" onkeydown="limitText(this,255)" onkeyup="limitText(this,255)" />
                        </h:panelGrid>
                        <h:panelGrid id="gridBotoes" columns="4">
                            <h:commandButton value="Salvar" actionListener="#{panelMB.salvar}">
                                <f:ajax execute="@form" render="@form :msgerro :tabPanels" />
                            </h:commandButton>
                            <h:commandButton value="Novo" actionListener="#{panelMB.novo}">
                                <f:ajax execute="@form" render="@form :msgerro" />
                            </h:commandButton>
                            <h:commandButton disabled="#{empty panelMB.panel.codigo}" value="Excluir" actionListener="#{panelMB.excluir}">
                                <f:ajax execute="@form" render="@form :msgerro :tabPanels" />
                            </h:commandButton>
                            <h:commandButton value="Voltar" action="/modulos/rede/cadRack" />
                        </h:panelGrid>
                        <br />
                    </h:form>
                    <h:messages id="msgerro" errorClass="estiloErro" layout="table" globalOnly="true" showDetail="false" showSummary="true"/>
                    <h:form id="tabPanels">
                        <p:dataTable id="tabelaPanels" var="panel" value="#{panelMB.listaPanels}">
                            <f:facet name="header"><h:outputText id="headerDtPanels" value="Painéis cadastrados" /></f:facet>
                            <p:column><f:facet name="header"><h:outputText value="Nome" /></f:facet>
                                <p:commandLink ajax="false" value="#{panel.nome}">
                                    <f:setPropertyActionListener value="#{panel}" target="#{panelMB.panel}" />
                                    <f:ajax execute="@form" render=":formPanel :msgerro" />
                                </p:commandLink>
                            </p:column>
                            <p:column><f:facet name="header"><h:outputText value="Portas" /></f:facet>
                                <h:outputText  value="#{panel.quantPortas}"  />
                            </p:column>
                            <p:column><f:facet name="header"><h:outputText value="Observação" /></f:facet>
                                <h:outputText  value="#{panel.observacao}"  />
                            </p:column>
                            <p:column id="columnEditaTomadas">
                                <f:facet name="header"><h:outputText id="textoEditarTomadas" value="Tomadas" /></f:facet>
                                <p:link id="linkTomadas" value="Ver" outcome="/modulos/rede/cadTomadaPanel.xhtml">
                                    <f:param name="panelCod" value="#{panel.codigo}" />
                                </p:link>
                            </p:column>
                            <f:facet name="footer"><h:outputText id="footerDtPanels" value="Total: #{panelMB.quantPanels}" /></f:facet>
                        </p:dataTable>
                    </h:form>
                </ui:define>
            </ui:composition>
        </body>
    </f:view>
</html>
